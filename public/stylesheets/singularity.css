:root {
  --bg: #0a0b10;
  --panel: #111426;
  --panel-border: #2b2e49;
  --text: #e6e6f0;
  --muted: #a5a8c2;
  --accent1: #ff6a00; /* neon orange */
  --accent2: #a000ff; /* neon purple */
  --accent3: #ff2ea6; /* magenta */
}
.wrap { background: radial-gradient(1200px 800px at 50% 40%, #14162a 0%, #0a0b10 60%, #06070b 100%); min-height: calc(100vh - 120px); border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.6); position: relative; overflow: hidden; }
canvas#stage { width: 100%; height: 100%; display: block; }
.hud { position: absolute; top: 16px; left: 16px; display: grid; gap: 10px; grid-template-columns: 1fr; max-width: min(420px, 90vw); z-index: 5; }
.card { background: linear-gradient(180deg, rgba(17,20,38,0.95) 0%, rgba(10,11,16,0.92) 100%); border: 1px solid var(--panel-border); border-radius: 12px; padding: 12px; color: var(--text); backdrop-filter: blur(6px); }
.title { font: 700 16px/1.2 ui-sans-serif, system-ui; letter-spacing: .02em; color: var(--text); margin: 0 0 6px 0; }
.row { display: grid; grid-template-columns: 110px 1fr 56px; gap: 8px; align-items: center; margin: 6px 0; }
.row label { color: var(--muted); font: 12px/1.2 ui-sans-serif, system-ui; }
.row input[type=range] { width: 100%; accent-color: var(--accent2); }
.row .val { font: 600 12px/1 ui-sans-serif; color: var(--accent2); text-align: right; }
.bar { height: 8px; background: linear-gradient(90deg, var(--accent1), var(--accent3), var(--accent2)); border-radius: 999px; filter: blur(0.3px); opacity: .8; }
.controls { display: grid; gap: 6px; }
.row input[type=file] { color-scheme: dark; }
.btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 8px 12px; border-radius: 10px; background: #14172e; border: 1px solid var(--panel-border); color: var(--text); cursor: pointer; font: 600 12px ui-sans-serif; }
.btn[data-on="true"] { outline: 2px solid color-mix(in oklab, var(--accent1) 60%, white 0%); background: #191d3a; color: #ffe; }
.footer { position: absolute; right: 14px; bottom: 10px; color: var(--muted); font: 12px ui-sans-serif; z-index: 5; }

html, body { height: 100%; margin: 0; background: #000; overflow: hidden; }
#stage-layer { position: fixed; inset: 0; }
#bg-stars { position: absolute; inset: 0; z-index: 0; display: block; }
#stage { position: absolute; inset: 0; z-index: 1; display: block; }

#controls-sheet { position: fixed; right: 24px; top: 24px; width: 420px; max-width: calc(100vw - 48px); z-index: 3; background: rgba(8, 8, 24, 0.85); border: 1px solid rgba(180, 0, 255, 0.25); box-shadow: 0 20px 60px rgba(0,0,0,0.5); border-radius: 16px; backdrop-filter: blur(8px); color: #e8dfff; }
#controls-header { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border-bottom: 1px solid rgba(255,255,255,0.08); }
#controls-body { padding: 12px; max-height: 70vh; overflow: auto; }
#controls-close { all: unset; cursor: pointer; padding: 4px 8px; border-radius: 8px; }

#controls-toggle { position: fixed; right: 16px; bottom: 16px; z-index: 4; width: 48px; height: 48px; border-radius: 999px; border: 1px solid rgba(255,255,255,0.15); background: rgba(24, 0, 64, 0.9); color: #fff; box-shadow: 0 8px 28px rgba(0,0,0,0.45); display: none; }

#controls-header { display: none; }
#controls-sheet { position: fixed; right: 24px; top: 24px; width: 420px; max-width: calc(100vw - 48px); z-index: 3; background: rgba(8, 8, 24, 0.85); border: 1px solid rgba(180, 0, 255, 0.25); box-shadow: 0 20px 60px rgba(0,0,0,0.5); border-radius: 16px; backdrop-filter: blur(8px); color: #e8dfff; will-change: transform; }

#controls-body { padding: 12px; max-height: 70vh; overflow: auto; }

@media (max-width: 900px) {
  #controls-sheet { left: 0; right: 0; bottom: 0; top: auto; width: 100vw; max-width: 100vw; border-radius: 16px 16px 0 0; transform: translateY(72%); transition: transform 240ms ease; }
  #controls-sheet[data-open="true"] { transform: translateY(0%); }
  #controls-toggle { display: inline-flex; align-items: center; justify-content: center; }
}

@supports (padding: env(safe-area-inset-bottom)) {
  #controls-body { padding-bottom: calc(12px + env(safe-area-inset-bottom)); }
  @media (max-width: 900px) {
    #controls-sheet { padding-bottom: env(safe-area-inset-bottom); }
    #controls-toggle { bottom: calc(16px + env(safe-area-inset-bottom)); }
  }
}
.hud, .card { background: transparent; }
#bg-stars { pointer-events: none; }